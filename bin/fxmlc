#
set -xe

jdk=${JAVA_HOME:-/opt/jdk13}
jfx=${JAVAFX_HOME:-/opt/jfx13}

rm -fr build
mkdir -p build

$jdk/bin/javac \
  -d build -cp dist/fx.mvc.jar \
  --module-path $jfx/lib --add-modules javafx.controls \
  $(find src/fxmlc -name '*.java')

rm -f dist/fxmlc.jar
mkdir -p dist

$jdk/bin/jar cvf \
  dist/fxmlc.jar -C build .

$jdk/bin/jar uvf \
  dist/fxmlc.jar -C src/fxmlc META-INF

